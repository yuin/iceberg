<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configurations &#8212; iceberg 0.9.14 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css?v=fce32b03" />
    <script src="_static/documentation_options.js?v=d0ba2447"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tips" href="tips.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>iceberg 0.9.14 documentation</span></a></h1>
        <h2 class="heading"><span>Configurations</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        «&#160;&#160;<a href="overview.html">Overview</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="tips.html">Tips</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="configurations">
<h1>Configurations<a class="headerlink" href="#configurations" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>All configurations are written in <a class="reference external" href="http://www.lua.org">Lua</a> . A default configuration directory differs depending on your platform.</p>
<p>Windows:</p>
<ul class="simple">
<li><p>Same directory as the base directory of iceberg executable file</p></li>
</ul>
<p>Linux:</p>
<p>iceberg searchs a configuration directory in the following order:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">${XDG_CONFIG_HOME}/iceberg</span></code> if <code class="docutils literal notranslate"><span class="pre">XDG_CONFIG_HOME</span></code> envvar exists.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">${HOME}/.config/iceberg</span></code> if <code class="docutils literal notranslate"><span class="pre">${HOME}/.config</span></code> is an existing directory path.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">${HOME}/.iceberg</span></code></p></li>
</ul>
<p>This directory shall be expressed as <code class="docutils literal notranslate"><span class="pre">ICEBERG_CONFIG_HOME</span></code> in this document.</p>
<p>A configuration file has several global functions and global variables.</p>
<p>Configuration files are also loaded from <code class="docutils literal notranslate"><span class="pre">${ICEBERG_CONFIG_HOME}/config.d/*.lua</span></code> .</p>
<p><code class="docutils literal notranslate"><span class="pre">auto_merge</span></code> can be used for writing configurations loaded from <code class="docutils literal notranslate"><span class="pre">config.d</span></code>.</p>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kd">local</span><span class="w"> </span><span class="nv">ibs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;icebergsupport&quot;</span><span class="p">)</span>

<span class="nv">auto_merge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">-- configurations such as ``system`` and ``commands`` after this line will automatically be merged</span>

<span class="nv">system</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">enable_icons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Note that if you do not set <code class="docutils literal notranslate"><span class="pre">auto_merge</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>, all global variables will be overwritten.</p>
</section>
<section id="key-names">
<h2>Key names<a class="headerlink" href="#key-names" title="Link to this heading">¶</a></h2>
<p>The following key names can be used in configurations. You can combine modifier keys and other keys by <code class="docutils literal notranslate"><span class="pre">-</span></code> (up to 3 keys) . The hot key configuration accepts OS native virtual keycodes.</p>
<p>Examples:</p>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;alt-space&quot;</span>
<span class="s2">&quot;shift-ctrl-a&quot;</span>
<span class="s2">&quot;0x1d&quot;</span><span class="w"> </span><span class="c1">-- Muhenkan on Windows(jp106 keyboard layout)</span>
<span class="s2">&quot;0x1c&quot;</span><span class="w"> </span><span class="c1">-- Henkan on Windows(jp106 keyboard layout)</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>Modifiers</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">shift</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">caps_lock</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctrl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_lock</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scroll_lock</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Others</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">a</span></code> - <code class="docutils literal notranslate"><span class="pre">z</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> - <code class="docutils literal notranslate"><span class="pre">9</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">space</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">backspace</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tab</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iso_key</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pause</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scroll_lock</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">escape</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">home</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">up</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">right</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">down</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">page_up</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">page_down</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">end</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">insert</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">menu</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">help</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_lock</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp0</span></code> : keys start with “kp” are on a numeric keypad</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp3</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp4</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp6</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp7</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp9</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp_enter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kp_last</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f3</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f4</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f6</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f7</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f9</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f10</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f11</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f12</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f_last</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shift_l</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shift_r</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">control_l</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">control_r</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">caps_lock</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta_l</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta_r</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alt_l</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alt_r</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delete</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">volume_down</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">volume_mute</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">volume_up</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">media_play</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">media_stop</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">media_prev</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">media_next</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">home_page</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mail</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">back</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">forward</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stop</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refresh</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sleep</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">favorites</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="system-global-variable">
<h2>System global variable<a class="headerlink" href="#system-global-variable" title="Link to this heading">¶</a></h2>
<section id="examples-and-descriptions">
<h3>Examples and descriptions<a class="headerlink" href="#examples-and-descriptions" title="Link to this heading">¶</a></h3>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="nv">system</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">-- a default value of limiting the depth of the search path --</span>
<span class="w">  </span><span class="nv">default_search_path_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- should show icons on listbox? --</span>
<span class="w">  </span><span class="nv">enable_icons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- an icon theme : meaningful only for Linux platforms --</span>
<span class="w">  </span><span class="nv">icon_theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;nuoveXT.2.2&quot;</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- a maximum number of cached icon data --</span>
<span class="w">  </span><span class="nv">max_cached_icons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9999</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- show completion candidates after N ms since the last key input --</span>
<span class="w">  </span><span class="c1">-- you can suppress unnecessary completions by setting this value on low-end machines --</span>
<span class="w">  </span><span class="nv">key_event_threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- a maximum number of commands to remember on the history file --</span>
<span class="w">  </span><span class="nv">max_histories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- a maximum number of candidates on the listbox --</span>
<span class="w">  </span><span class="nv">max_candidates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- a maximum number of clipboard histories : meaningful only for Windows platforms --</span>
<span class="w">  </span><span class="nv">max_clipboard_histories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- degree of influence of histories on completion candidates sorting(0.0~1.0) --</span>
<span class="w">  </span><span class="nv">history_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- an application to handle directories. ${1} will be replaced with a directory path --</span>
<span class="w">  </span><span class="nv">file_browser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[explorer ${1}]]</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- an application to handle CUI applications. ${1} will be replaced with a command text. This application must be executed as a login shell --</span>
<span class="w">  </span><span class="nv">terminal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[lxterminal -l -e ${1}]]</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- a port number to accept commands from external processes.(0: disabled) --</span>
<span class="w">  </span><span class="nv">server_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13505</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- should do autocompletion in a path completion --</span>
<span class="w">  </span><span class="nv">path_autocomplete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- should do autocompletion in an option completion --</span>
<span class="w">  </span><span class="nv">option_autocomplete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- DirectWrite parameters. an empty string means using default parameter --</span>
<span class="w">  </span><span class="nv">direct_write_params</span><span class="o">=</span><span class="s2">&quot;gamma=1.8,enchanced_contrast=0.5,clear_type_level=0.5,pixel_geometry=0,rendering_mode=5&quot;</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- Keys --</span>
<span class="w">  </span><span class="c1">-- hot_key accepts OS dependent virtual key codes --</span>
<span class="w">  </span><span class="c1">--   Example: hot_key = &quot;0x1d&quot;  muhenkan(jp106 keyboard layout) --</span>
<span class="w">  </span><span class="nv">hot_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ctrl-space&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">escape_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;escape&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">list_next_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ctrl-n&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">list_prev_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ctrl-p&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">toggle_mode_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ctrl-r&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">kill_word_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ctrl-w&quot;</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- Search paths --</span>
<span class="w">  </span><span class="nv">search_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">{</span><span class="nv">category</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[C:\Windows\System32]]</span><span class="p">,</span><span class="w"> </span><span class="nv">depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">pattern</span><span class="o">=</span><span class="s2">&quot;^.*</span><span class="se">\\</span><span class="s2">.(exe)$&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nv">category</span><span class="o">=</span><span class="s2">&quot;programs&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[C:\Users\]]</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nb">os.getenv</span><span class="p">(</span><span class="s2">&quot;USERNAME&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s">[[\AppData\Roaming\Microsoft\Windows\Start Menu\Programs]]</span><span class="p">,</span><span class="w"> </span><span class="nv">depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nv">pattern</span><span class="o">=</span><span class="s">[[^.*\.(exe|lnk)$]]</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nv">category</span><span class="o">=</span><span class="s2">&quot;programs&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[C:\ProgramData\Microsoft\Windows\Start Menu\Programs]]</span><span class="p">,</span><span class="w"> </span><span class="nv">depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nv">pattern</span><span class="o">=</span><span class="s">[[^.*\.(exe|lnk)$]]</span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="c1">-- Completions --</span>
<span class="w">  </span><span class="nv">completer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">-- a command name completion: fuzzy match --</span>
<span class="w">    </span><span class="nv">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ibs</span><span class="p">.</span><span class="py">COMP_ABBR</span><span class="p">,</span>

<span class="w">    </span><span class="c1">-- a path completion: prefix match --</span>
<span class="w">    </span><span class="nv">path</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">ibs</span><span class="p">.</span><span class="py">COMP_BEGINSWITH</span><span class="p">,</span>

<span class="w">    </span><span class="c1">-- a history completion: partial match --</span>
<span class="w">    </span><span class="nv">history</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ibs</span><span class="p">.</span><span class="py">COMP_PARTIAL</span><span class="p">,</span>

<span class="w">    </span><span class="c1">-- an option completion --</span>
<span class="w">    </span><span class="nv">option</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">ibs</span><span class="p">.</span><span class="py">COMP_PARTIAL</span><span class="p">,</span>

<span class="w">    </span><span class="c1">-- completion functions --</span>
<span class="w">    </span><span class="nv">option_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="p">[</span><span class="s2">&quot;:scan_search_path&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">values</span><span class="p">,</span><span class="w"> </span><span class="nv">pos</span><span class="p">)</span>
<span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">candidates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;all&quot;</span><span class="p">}</span>
<span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">keys</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span>
<span class="w">        </span><span class="kr">for</span><span class="w"> </span><span class="nv">i</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">system</span><span class="p">.</span><span class="py">search_path</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
<span class="w">          </span><span class="kr">if</span><span class="w"> </span><span class="nv">value</span><span class="p">.</span><span class="py">category</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">keys</span><span class="p">[</span><span class="nv">value</span><span class="p">.</span><span class="py">category</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="kr">then</span>
<span class="w">            </span><span class="nb">table.insert</span><span class="p">(</span><span class="nv">candidates</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="p">.</span><span class="py">category</span><span class="p">)</span>
<span class="w">            </span><span class="nv">keys</span><span class="p">[</span><span class="nv">value</span><span class="p">.</span><span class="py">category</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">          </span><span class="kr">end</span>
<span class="w">        </span><span class="kr">end</span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nv">candidates</span>
<span class="w">      </span><span class="kr">end</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="search-paths">
<h3>Search paths<a class="headerlink" href="#search-paths" title="Link to this heading">¶</a></h3>
<p>iceberg can search under search paths and register found commands by single command( <code class="docutils literal notranslate"><span class="pre">:scan_search_path</span></code> ). A search path consists of</p>
<dl class="field-list simple">
<dt class="field-odd">category<span class="colon">:</span></dt>
<dd class="field-odd"><p>You can pass a category to <code class="docutils literal notranslate"><span class="pre">:scan_search_path</span></code> to filter target search paths. If a category is not specified, <code class="docutils literal notranslate"><span class="pre">default</span></code> is used as a category.</p>
</dd>
<dt class="field-even">path<span class="colon">:</span></dt>
<dd class="field-even"><p>A base directory of this search path.</p>
</dd>
<dt class="field-odd">depth<span class="colon">:</span></dt>
<dd class="field-odd"><p>Limit the depth of the search path to this value. If <code class="docutils literal notranslate"><span class="pre">depth</span></code> is not specified, <code class="docutils literal notranslate"><span class="pre">system.default_search_path_depth</span></code> is used as <code class="docutils literal notranslate"><span class="pre">depth</span></code></p>
</dd>
<dt class="field-even">pattern<span class="colon">:</span></dt>
<dd class="field-even"><p>A regular expression to filter files by its name. Files that match this regular expression will be registerd with iceberg.</p>
</dd>
</dl>
</section>
<section id="completion-functions">
<h3>Completion functions<a class="headerlink" href="#completion-functions" title="Link to this heading">¶</a></h3>
<p>Commands can have a completion function.</p>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span><span class="p">(</span><span class="nv">values</span><span class="p">,</span><span class="w"> </span><span class="nv">pos</span><span class="p">)</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c&quot;</span><span class="p">}</span>
<span class="kr">end</span>

<span class="c1">-- もしくは</span>

<span class="kr">function</span><span class="p">(</span><span class="nv">values</span><span class="p">,</span><span class="w"> </span><span class="nv">pos</span><span class="p">)</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="p">{</span><span class="nv">value</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">icon</span><span class="o">=</span><span class="s2">&quot;path_to/icon.png&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s2">&quot;desc&quot;</span><span class="p">},</span>
<span class="w">   </span><span class="p">{</span><span class="nv">value</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">icon</span><span class="o">=</span><span class="s2">&quot;path_to/icon.jpg&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s2">&quot;desc&quot;</span><span class="p">},</span>
<span class="w">   </span><span class="p">{</span><span class="nv">value</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">icon</span><span class="o">=</span><span class="s2">&quot;path_to/icon.gif&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s2">&quot;desc&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="kr">end</span>
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">values</span></code> is a list of arguments for the command. If no argument exists, <code class="docutils literal notranslate"><span class="pre">value</span></code> will be a list that has single empty string entry. <code class="docutils literal notranslate"><span class="pre">pos</span></code> is an index of <code class="docutils literal notranslate"><span class="pre">value</span></code> where cursor exists.
Completion functions have to return the list of strings or a table contains following keys:</p>
<dl class="field-list simple">
<dt class="field-odd">value<span class="colon">:</span></dt>
<dd class="field-odd"><p>Completion value(required).</p>
</dd>
<dt class="field-even">icon<span class="colon">:</span></dt>
<dd class="field-even"><p>An icon file path for this command</p>
</dd>
<dt class="field-odd">description<span class="colon">:</span></dt>
<dd class="field-odd"><p>Description</p>
</dd>
<dt class="field-even">always_match<span class="colon">:</span></dt>
<dd class="field-even"><p>Disables candidate filtering by user text input. Typically this option is set to true in a command such as searching a term in Google.</p>
</dd>
</dl>
<p>Please refer to <a class="reference internal" href="api.html#icebergsupport.comp_state" title="icebergsupport.comp_state"><code class="xref lua lua-func docutils literal notranslate"><span class="pre">icebergsupport.comp_state()</span></code></a> for writing a complex completion function.</p>
</section>
</section>
<section id="commands-global-variable">
<h2>commands global variable<a class="headerlink" href="#commands-global-variable" title="Link to this heading">¶</a></h2>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h3>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="nv">commands</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">-- A directory, will not be recorded in the history file --</span>
<span class="w">  </span><span class="nv">windir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[C:\Windows]]</span><span class="p">,</span><span class="w"> </span><span class="nv">history</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>

<span class="w">  </span><span class="c1">-- An executable file, runs with a iceberg current directory --</span>
<span class="w">  </span><span class="nv">np</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[notepad.exe]]</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s2">&quot;Notepad&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">workdir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">},</span>

<span class="w">  </span><span class="c1">-- An executable file, will be run as an administrator user</span>
<span class="w">  </span><span class="nv">admin_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[cmd.exe]]</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s2">&quot;cmd.exe(runas admin)&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">sudo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span>

<span class="w">  </span><span class="c1">-- A shell script file, executed in the terminal --</span>
<span class="w">  </span><span class="nv">np</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[myscript.sh]]</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s2">&quot;My script&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">terminal</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">},</span>

<span class="w">  </span><span class="c1">-- A lua function, has a completion function --</span>
<span class="w">  </span><span class="nv">lua_sample</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">args</span><span class="p">)</span>
<span class="w">      </span><span class="kd">local</span><span class="w"> </span><span class="nv">explorer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">wins</span><span class="p">.</span><span class="nf">foreground_explorer</span><span class="p">()</span>
<span class="w">      </span><span class="kr">if</span><span class="w"> </span><span class="nv">explorer</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="nv">ibs</span><span class="p">.</span><span class="nf">message</span><span class="p">(</span><span class="nv">ibs</span><span class="p">.</span><span class="nf">table_to_string</span><span class="p">(</span><span class="nv">explorer</span><span class="p">))</span>
<span class="w">      </span><span class="kr">end</span>
<span class="w">    </span><span class="kr">end</span><span class="p">,</span>
<span class="w">    </span><span class="nv">completion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">values</span><span class="p">,</span><span class="w"> </span><span class="nv">pos</span><span class="p">)</span>
<span class="w">      </span><span class="kr">return</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="p">}</span>
<span class="w">    </span><span class="kr">end</span>
<span class="w">    </span><span class="nv">description</span><span class="o">=</span><span class="s2">&quot;Sample Lua command&quot;</span><span class="p">},</span>


<span class="w">  </span><span class="c1">-- A URL, has a png icon file --</span>
<span class="w">  </span><span class="nv">google</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[[http://www.google.com/search?ie=utf8&amp;q=${1}]]</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s">[[Searches words on Google]]</span><span class="p">,</span><span class="w"> </span><span class="nv">history</span><span class="o">=</span><span class="kc">false</span><span class="p">,</span>
<span class="w">       </span><span class="nv">icon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">script_path</span><span class="w"> </span><span class="o">..</span><span class="s">[[images\google256.png]]</span><span class="p">},</span>

<span class="w">  </span><span class="c1">-- A group of commands --</span>
<span class="w">  </span><span class="nv">group_sample</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ibs</span><span class="p">.</span><span class="nf">group_command</span><span class="p">({</span><span class="s2">&quot;windir&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{}},</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;np&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{}}),</span><span class="w"> </span><span class="nv">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;runs a group of commands&quot;</span><span class="p">},</span>

<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="commands">
<h3>Commands<a class="headerlink" href="#commands" title="Link to this heading">¶</a></h3>
<p>Commands consist of</p>
<dl class="field-list">
<dt class="field-odd">name<span class="colon">:</span></dt>
<dd class="field-odd"><p>A key of the <code class="docutils literal notranslate"><span class="pre">commands</span></code> table.</p>
</dd>
<dt class="field-even">path<span class="colon">:</span></dt>
<dd class="field-even"><p>A file path or URL or lua function. A path can contain arguments like the following.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;C:\s p a c e</span><span class="se">\b</span><span class="s2">in.exe&quot;</span> <span class="n">arg1</span> <span class="n">arg2</span><span class="p">]]</span>
</pre></div>
</div>
<p>Paths that contain spaces must be enclosed in <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> .</p>
<p>Positional variables can be use in a path. If the inputbox has <code class="docutils literal notranslate"><span class="pre">google</span> <span class="pre">iceberg</span></code> and a path of the <code class="docutils literal notranslate"><span class="pre">google</span></code> command is defined as follows, <code class="docutils literal notranslate"><span class="pre">${1}</span></code> will be replaced with <code class="docutils literal notranslate"><span class="pre">iceberg</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>path = [[http://www.google.com/search?ie=utf8&amp;q=${1}]]
</pre></div>
</div>
<p>In a Lua function, the function receives a list of string. Lua functions should return 0 when function executed successfully, 1 otherwise.</p>
</dd>
<dt class="field-odd">completion<span class="colon">:</span></dt>
<dd class="field-odd"><p>A completion function that has same form as <code class="docutils literal notranslate"><span class="pre">system.completer.option_func</span></code>. Completion functions can either be defined in a command definition or <code class="docutils literal notranslate"><span class="pre">system.completer.option_func</span></code> .  This value overrides <code class="docutils literal notranslate"><span class="pre">system.completer.option_func</span></code> if both are defined.</p>
</dd>
<dt class="field-even">description<span class="colon">:</span></dt>
<dd class="field-even"><p>A description for this command.</p>
</dd>
<dt class="field-odd">icon<span class="colon">:</span></dt>
<dd class="field-odd"><p>An icon file path. On Linux platforms, an icon name in an icon theme is valid. If an icon name is used, iceberg select the best size of an image automatically.</p>
</dd>
<dt class="field-even">terminal<span class="colon">:</span></dt>
<dd class="field-even"><p>If this value is set to <code class="docutils literal notranslate"><span class="pre">&quot;yes&quot;</span></code>, the command will always be executed in the terminal. <code class="docutils literal notranslate"><span class="pre">&quot;no&quot;</span></code> means the command will be executed without the termina. If this value is set to <code class="docutils literal notranslate"><span class="pre">&quot;auto&quot;</span></code> , iceberg determines whether or not this command should be executed in the terminal.</p>
</dd>
<dt class="field-odd">history<span class="colon">:</span></dt>
<dd class="field-odd"><p>If this value is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, Additional arguments will no be recorded in the history file.</p>
</dd>
<dt class="field-even">workdir<span class="colon">:</span></dt>
<dd class="field-even"><p>A working directory of this command.</p>
<ul class="simple">
<li><p>strings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code> : use iceberg current directory</p></li>
<li><p>Lua function: use a return value(string) of the function. You can make iceberg and your file browser cooperate by writing a function that returns a current directory of your file browser.</p></li>
</ul>
</dd>
<dt class="field-odd">sudo<span class="colon">:</span></dt>
<dd class="field-odd"><p>If this value is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, this command will be run as an administrator user.</p>
</dd>
</dl>
</section>
</section>
<section id="shortcuts-global-variables">
<h2>shortcuts global variables<a class="headerlink" href="#shortcuts-global-variables" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3>Examples<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="nv">shortcuts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ctrl-d&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;:opendir&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ctrl-l&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;:cd&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Consider, when you have pressed <code class="docutils literal notranslate"><span class="pre">ctrl-l</span></code> and the inputbox values is <code class="docutils literal notranslate"><span class="pre">c:\</span></code> .
In this situation, the following command will be executed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="n">cd</span> <span class="n">c</span><span class="p">:</span>\
</pre></div>
</div>
<p>In short, an inputbox value is passed as an argument to the command.</p>
</section>
</section>
<section id="on-key-up-event-handler">
<h2>on_key_up event handler<a class="headerlink" href="#on-key-up-event-handler" title="Link to this heading">¶</a></h2>
<p>This function will be executed when you release the key on the keyboard.</p>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span><span class="w"> </span><span class="nf">on_key_up</span><span class="p">()</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">accept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nv">accept</span>
<span class="kr">end</span>
</pre></div>
</div>
</div></blockquote>
<p>If you want to prevent default behavior, return 1 .</p>
</section>
<section id="on-key-down-event-handler">
<h2>on_key_down event handler<a class="headerlink" href="#on-key-down-event-handler" title="Link to this heading">¶</a></h2>
<p>This function will be executed when you press the key on the keyboard.</p>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span><span class="w"> </span><span class="nf">on_key_down</span><span class="p">()</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">accept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nv">accept</span>
<span class="kr">end</span>
</pre></div>
</div>
</div></blockquote>
<p>If you want to prevent default behavior, return 1 .</p>
</section>
<section id="on-enter-event-handler">
<h2>on_enter event handler<a class="headerlink" href="#on-enter-event-handler" title="Link to this heading">¶</a></h2>
<p>This function will be executed when you press the Enter key on the keyboard.</p>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span><span class="w"> </span><span class="nf">on_enter</span><span class="p">()</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nv">accept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nv">accept</span>
<span class="kr">end</span>
</pre></div>
</div>
</div></blockquote>
<p>If you want to prevent default behavior, return 1 .</p>
</section>
<section id="on-initialize-event-handler">
<h2>on_initialize event handler<a class="headerlink" href="#on-initialize-event-handler" title="Link to this heading">¶</a></h2>
<p>This function will be executed just after iceberg is launched.</p>
<blockquote>
<div><div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="kr">function</span><span class="w"> </span><span class="nf">on_initialize</span><span class="p">()</span>
<span class="w">  </span><span class="kd">local</span><span class="w"> </span><span class="nb">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="nb">error</span>
<span class="kr">end</span>
</pre></div>
</div>
</div></blockquote>
<p>If this function returns 1, the launching process will be stopped.</p>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        «&#160;&#160;<a href="overview.html">Overview</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="tips.html">Tips</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2012-2025, Yusuke Inuzuka.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>